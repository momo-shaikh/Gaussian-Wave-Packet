import React, { useState } from 'react';
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';
import { Slider } from '@/components/ui/slider';

const GaussianWaveFunction = () => {
  const [sigma, setSigma] = useState(1);
  const [k, setK] = useState(5);
  const [t, setT] = useState(0);

  const generateData = () => {
    const data = [];
    for (let x = -5; x <= 5; x += 0.1) {
      const realPart = Math.exp(-(x * x) / (4 * sigma * sigma)) * Math.cos(k * x - t);
      const imagPart = Math.exp(-(x * x) / (4 * sigma * sigma)) * Math.sin(k * x - t);
      const probability = realPart * realPart + imagPart * imagPart;
      data.push({ 
        x: Number(x.toFixed(1)), 
        real: Number(realPart.toFixed(4)),
        imag: Number(imagPart.toFixed(4)),
        prob: Number(probability.toFixed(4))
      });
    }
    return data;
  };

  const data = generateData();

  return (
    <div className="p-4 bg-white rounded-lg shadow">
      <h2 className="text-xl font-bold mb-4">Interactive Gaussian Wave Function</h2>
      <ResponsiveContainer width="100%" height={300}>
        <LineChart data={data}>
          <CartesianGrid strokeDasharray="3 3" />
          <XAxis dataKey="x" label={{ value: 'Position (x)', position: 'insideBottom', offset: -5 }} />
          <YAxis label={{ value: 'Amplitude', angle: -90, position: 'insideLeft' }} />
          <Tooltip formatter={(value) => value.toFixed(4)} />
          <Line type="monotone" dataKey="real" stroke="#8884d8" dot={false} name="Real Part" />
          <Line type="monotone" dataKey="imag" stroke="#82ca9d" dot={false} name="Imaginary Part" />
          <Line type="monotone" dataKey="prob" stroke="#ff7300" dot={false} name="Probability Density" />
        </LineChart>
      </ResponsiveContainer>
      <div className="mt-4 space-y-4">
        <div>
          <label className="block text-sm font-medium text-gray-700">Sigma (width): {sigma.toFixed(2)}</label>
          <Slider
            value={[sigma]}
            onValueChange={(value) => setSigma(value[0])}
            min={0.1}
            max={2}
            step={0.1}
          />
        </div>
        <div>
          <label className="block text-sm font-medium text-gray-700">k (wavenumber): {k.toFixed(2)}</label>
          <Slider
            value={[k]}
            onValueChange={(value) => setK(value[0])}
            min={0}
            max={10}
            step={0.1}
          />
        </div>
        <div>
          <label className="block text-sm font-medium text-gray-700">t (time): {t.toFixed(2)}</label>
          <Slider
            value={[t]}
            onValueChange={(value) => setT(value[0])}
            min={0}
            max={10}
            step={0.1}
          />
        </div>
      </div>
      <div className="mt-4">
        <p>This visualization shows a Gaussian wave function ψ(x,t) = exp(-(x²)/(4σ²)) * exp(i(kx - t)):</p>
        <ul className="list-disc list-inside mt-2">
          <li>The blue line represents the real part of ψ(x,t)</li>
          <li>The green line represents the imaginary part of ψ(x,t)</li>
          <li>The orange line represents the probability density |ψ(x,t)|²</li>
          <li>Adjust the sliders to see how σ (width), k (wavenumber), and t (time) affect the wave function</li>
        </ul>
      </div>
    </div>
  );
};

export default GaussianWaveFunction;
